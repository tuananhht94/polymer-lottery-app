import{T as R,d as g,L as N,N as $,t as o,v as a,x as t,B as k,R as c,y as f,l as y,M as S,U as x,V as A,W as B,O as D,P as L,Q as I,S as v,_ as O,z as T}from"./CQoln4ml.js";import{d as _,a as u}from"./MAmfmF4f.js";function w(h,e){let[n,s="0"]=h.split(".");const i=n.startsWith("-");if(i&&(n=n.slice(1)),s=s.replace(/(0+)$/,""),e===0)Math.round(+`.${s}`)===1&&(n=`${BigInt(n)+1n}`),s="";else if(s.length>e){const[l,p,d]=[s.slice(0,e-1),s.slice(e-1,e),s.slice(e)],r=Math.round(+`${p}.${d}`);r>9?s=`${BigInt(l)+BigInt(1)}0`.padStart(l.length+1,"0"):s=`${l}${r}`,s.length>e&&(s=s.slice(1),n=`${BigInt(n)+1n}`),s=s.slice(0,e)}else s=s.padEnd(e,"0");return BigInt(`${i?"-":""}${n}${s}`)}function Y(h,e="wei"){return w(h,R[e])}const P={class:"card"},V={class:"card-body"},W={key:0},H={key:1},M=g({__name:"LotteryDataCard",setup(h){const e=y(),{data:n,isLoading:s,refetch:i}=N({chainId:_.id,address:`0x${e.public.LOTTERY_CONTRACT_ADDRESS}`});return $({chainId:_.id,address:`0x${e.public.LOTTERY_CONTRACT_ADDRESS}`,abi:u,eventName:"Enter",listener:()=>{i()}}),$({chainId:_.id,address:`0x${e.public.LOTTERY_CONTRACT_ADDRESS}`,abi:u,eventName:"Winner",listener:()=>{i()}}),(l,p)=>{var d,r;return o(),a("div",P,[t("div",V,[t("div",null,[t("b",null,[k("Prize: "),c(s)?(o(),a("span",W,"loading...")):(o(),a("span",H,f((d=c(n))==null?void 0:d.formatted)+" "+f((r=c(n))==null?void 0:r.symbol),1))])])])])}}}),U={class:"card"},z={class:"card-body"},F={class:"card-title"},Q={key:0},j=t("p",null,"Loading players...",-1),q=[j],G={key:1},J=g({__name:"PlayersCard",setup(h){const e=y(),{data:n,isLoading:s,refetch:i}=S({chainId:_.id,address:`0x${e.public.LOTTERY_CONTRACT_ADDRESS}`,abi:u,functionName:"getPlayers"});return $({chainId:_.id,address:`0x${e.public.LOTTERY_CONTRACT_ADDRESS}`,abi:u,eventName:"Enter",listener:()=>{i()}}),$({chainId:_.id,address:`0x${e.public.LOTTERY_CONTRACT_ADDRESS}`,abi:u,eventName:"Winner",listener:()=>{i()}}),(l,p)=>{var d;return o(),a("div",U,[t("div",z,[t("h5",F," Players ("+f(((d=c(n))==null?void 0:d.length)||0)+") ",1),c(s)?(o(),a("div",Q,q)):(o(),a("div",G,[t("ul",null,[(o(!0),a(x,null,A(c(n),r=>(o(),a("li",{key:r},f(r),1))),128))])]))])])}}}),K={class:"card"},X={class:"card-body"},Z={class:"row g-0"},tt={class:"col"},st={class:"bet"},et={key:0},nt=t("p",null,"Bet Amount: 0.1 ETH",-1),ot=["disabled"],at={key:1},ct=t("div",{class:"alert alert-warning"},[t("span",null,"You need to connect your wallet")],-1),it=t("p",null,"Bet Amount: 0.1 ETH",-1),dt=[ct,it],rt={class:"lottery"},_t={key:0},lt=t("p",null,"Your transaction is being confirmed, please wait!",-1),ht=[lt],ut={key:1,class:"transaction"},pt=t("p",null,"Your bet has been placed successfully!",-1),ft=["href"],$t={key:2,class:"transaction"},vt=t("p",null,"Transaction failed!",-1),Tt=[vt],gt=g({__name:"BetCard",setup(h){const{isConnected:e}=B(),n=D(),{switchNetworkAsync:s}=L({chainId:_.id}),i=y(),{data:l,write:p,isLoading:d,isSuccess:r,isError:m}=I({chainId:_.id,address:`0x${i.public.LOTTERY_CONTRACT_ADDRESS}`,abi:u,functionName:"enter",value:Y("0.1")});async function E(){n.value!==_.id&&await s(),p()}return(xt,At)=>{var C,b;return o(),a("div",K,[t("div",X,[t("div",Z,[t("div",tt,[t("div",st,[c(e)?(o(),a("div",et,[nt,t("button",{class:"btn btn-dark",disabled:c(d),onClick:E}," Bet! ",8,ot)])):(o(),a("div",at,dt)),t("div",rt,[c(d)?(o(),a("div",_t,ht)):v("",!0),c(r)?(o(),a("div",ut,[pt,t("a",{href:`${c(_).blockExplorers.default.url}/tx/${(C=c(l))==null?void 0:C.hash}`,target:"_blank"}," Click here and check your transaction ",8,ft),t("p",null,"Hash: "+f((b=c(l))==null?void 0:b.hash),1)])):v("",!0)]),c(m)?(o(),a("div",$t,Tt)):v("",!0)])])])])])}}}),yt={},Ct={class:"container py-4"},bt={class:"row g-4"},mt={class:"col-12 col-md-6"},Et={class:"row g-4"},Rt={class:"col-12"},Nt={class:"col-12"},kt={class:"col-12 col-md-6"};function St(h,e){const n=M,s=J,i=gt;return o(),a("main",null,[t("div",Ct,[t("div",bt,[t("div",mt,[t("div",Et,[t("div",Rt,[T(n)]),t("div",Nt,[T(s)])])]),t("div",kt,[T(i)])])])])}const Lt=O(yt,[["render",St]]);export{Lt as default};
